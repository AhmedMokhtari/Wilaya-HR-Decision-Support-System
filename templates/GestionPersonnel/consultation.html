{% extends 'menu.html' %}
{% block content %}
    {% load static %}
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}"/>
    <form method="POST">
    {% csrf_token %}
        <div class="col-12 col-xl-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title"><strong>Personnel <span class="float-right">الموضفين</span></strong></h3>
                    <h6 class="card-subtitle text-muted">les informations du personnel <span class="float-right">معلومات الموضفين</span></h6>
                    <hr>
                    <div class="text-center">
                        <div class="col-sm-3 float-left">
                           <input class="form-control" id="search" placeholder="Recherche">
                        </div>

                        <div class="col-sm-2 float-right">
                           <a href="{% url 'ajouterp' %}" class="btn btn-success m-1"><i class="fa-solid fa-plus  " ></i></a>
                            <a  class="btn btn-primary  m-1" id="export" href="{% url 'export_perso_xls' %}"><i class="fa-solid fa-file-excel " ></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-12 col-xxl-12 d-flex">
                    <table class="table table-striped text-center">
                        <thead>
                            <tr>
                                <th>Cin - ر.ب.و</th>
                                <th>Nom Complet</th>
                                <th>الاسم الكامل</th>
                                <th>Tele - هاتف</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for personnel in personnels %}
                              <tr class="tb-colon"  >
                                <td>{{ personnel.cin }}</td>
                                <td>{{ personnel.nomfr }} - {{personnel.prenomfr}}</td>
                                <td>{{personnel.nomar}} - {{ personnel.prenomar }}</td>
                                <td>{{ personnel.tele }}</td>
                                <td><a href="{% url 'info' personnel.idpersonnel %}" class="btn btn-success m-1"><i class="fa-solid fa-eye fa-lg " ></i></a><a href="{% url 'modifier' personnel.idpersonnel %}" class="btn btn-warning btn-icon  mx-1"><i class="fa-solid fa-pen fa-xs mx-1"></i></a> </td>
                              </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
      <script>
    let $rows = $('#table tbody tr');
$('#search').keyup(function() {
    let val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

    $rows.show().filter(function() {
        let text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
        return !~text.indexOf(val);
    }).hide();
});
    </script>
{% endblock %}